---
title: react学习
---

### reactjs

react 构建用户界面的 javascript库，主要用于构建UI界面，源起 Facebook的Instagram,2013年开源

## 特点
1. 声明式的设计
2. 高效，采用虚拟dom来实现 dom的渲染，最大限度的减少 dom 的操作
3. 灵活，跟其他库灵活配合使用
4. **JSX**， 俗称 在 js中 写 html, javascript 语法的扩展
5. 组件化，模块化。代码容易复用，大型项目非常喜欢react
6. 单向数据流，没有实现数据的双向绑定。 数据->视图->事件->数据

## 创建项目
[react官网](https://react.docschina.org/)

1. 通过javascript引入使用，仅用于学习调试使用
```
<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
``` 
2. 通过react的脚手架，创建项目，进行开发，部署
   1. 安装脚手架 Create react App
   ```
   cnpm install -g create-react-app
   ```
   2. 创建项目
   ```
   create-react-app xxxx(项目名称自定义)
   cd xxxx
   npm start
   ```

## react元素渲染
```
这里不需要加引号
let h1 = <h1>helloworld</h1>
使用JSX的语法，可以创建JS元素对象
注意：JSX元素对象，或者组件，必须只有1个根元素(根节点)
```
   1. 函数式组件渲染
   ```
   // 实时页面时间显示
   function clock() {
     let time = new Date().toLocaleTimeString();
     let element = <h1>现在的时间是{time}</h1>
     let root = document.querySelector('#root');
     ReactDOM.render(element, root);
   }
   setInterval(clock, 1000);
   ```
   ```
   function clock2(props) {
   return (
       <div>
          <h1>现在的时间是 {props.data.toLocaleTimeString()}</h1>
          <h1>函数式组件开发</h1>
      </div>
   );
   }
   function run() {
   ReactDOM.render(
      <clock2 data={new Date()} />,
      document.querySelector('#root')
   );
   }
   setInterval(run, 1000);
   ```

### react JSX
1. 优点：
   1. JSX执行更快，编译为Javascript代码时进行优化
   2. 类型更安全，编译过程如果出错，就不能继续编译下去，及时发现错误
   3. JSX编写模板更加简单快速(这里咱不和VUE比)

注意：
1. JSX必须要有根节点
2. 正常的普通HTML元素要小写，如果大写，默认被认为是组件   

### JSX表达式
1. 由HTML元素构成
2. 中间如果需要插入变量，用`{}`
3. `{}`中间可以使用表达式
4. `{}`中间 表达式中 可以使用JSX对象
5. 属性和HTML内容一样都是用`{}`来插入 

`注意：一个{} 只能有一个表达式，如果需要多个表达式，使用多个{}`
`但是一个{}中 可以层层嵌套表达式 `

```
let main= '下雨';
let element = (
  <div>
    <span>{main == '下雨' ? <bottom>唱跳 Rap</bottom> : <bottom>打篮球<bottom/>}</span>
  </div>
);
ReactDOM.render(element, document.querySelector('#root'));
```

```
let color= 'bgRed'; // 引入一个css,设置 类名为 bgRed 的类
let element = (
  <div className={color}>123</div>
);
ReactDOM.render(element, document.querySelector('#root'));
```

## jsx style
``` js
let exampleStyle = {
  background: "skyblue",
  borderBottom: "1px solid red",
  'background-image':'url(https://xxxxxx.jpg)'
};

let element = (
  <div>
    {/* 这里写注释 */}
    <h1 style={exampleStyle}>helloworld</h1>
  </div>
);
ReactDOM.render(element, document.querySelector('#root'));
```
``` js
let classStr = "redBg"; // ['aaa', 'bbb'].join(' '); 只能是字符串传进去
let element2 = (
  <div>
    {/* 这里写注释 */}
    <h1 className={'class1 ' + classStr}>多个类名</h1>
  </div>
);
ReactDOM.render(element2, document.querySelector('#root'));
```
1. class中，不可以存在多个 class
``` html
错误表示： <div class='aaa' class={'bbb'}>123</div>
```
2. style样式中，如果存在多个单词属性的组合，第二个单词开始，首字母大写,或者引号引起来，否则报错
``` js
let exampleStyle = {
  background: "skyblue",
  borderBottom: "1px solid red",
  'background-image':'url(https://xxxxxx.jpg)'
};
```
3. 多个类共存的操作
``` js
<h1 className={'class1 ' + classStr}>多个类名</h1>

let classStr = "redBg"; // ['aaa', 'bbb'].join(' '); 只能是字符串传进去
let element2 = (
  <div>
    {/* 这里写注释 */}
    <h1 className={'class1 ' + classStr}>多个类名</h1>
  </div>
);
```
4. 注释  必须在括号的表达式内书写，否则报错
``` js
{/* 这里写注释 */}
```

## react组件
1. 函数式组件
```js
// 函数式组件
function childDom(props) {
  let title = <h1>我是副标题</h1>;
  let weather = props.weather ;
  // let weather = '下雨';
  // 条件判断
  let isGo = weather == '下雨' ? 'no' : 'yes';
  return (
    <div>
      <h1>hello childDom</h1>
      {title}
      <div>
        是否出门
        <span>{isGo}</span>
      </div>
    </div>
  )
}

// 引用
ReactDOM.render(
  <childDom weather="下雨" />,
  document.querySelector('#root')
);
```
2. 类组件
``` js
// 类组件定义
class HelloWorld extends React.Component {
  render() {
    console.log(this);
    return (
      <div>
        <h1>类组件定义 hellword</h1>
        <h1>hello: {this.props.aaa}</h1>
        <childDom weather={this.props.weather} />
      </div>
    )
  }
}

// 引用 ReactDOM 这里 一般只放一个组件，但是这个组件内可以放多个组件
ReactDOM.render(
  <HelloWorld aaa="aadsd" weather="出太阳"/>,
  document.querySelector('#root')
);
```

3. 复合组件：组件中又有其他组件，复合组件中既可以有类组件，又可以有函数组件

函数式组件 和 类组件 的区域 和 使用
- 函数式组件比较单一，一般用于静态没有交互事件内容的组件页面
- 类组件，一般又称为动态组件，那么一般会交互或则修改数据的操作 